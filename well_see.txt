# save as: well_see.py
import random
import textwrap
from datetime import datetime

OPENERS = [
    "Look,",
    "Listen,",
    "Let me tell you,",
    "A lot of people are saying,",
    "Nobody knows more about this than me,",
    "Weâ€™re doing a tremendous job,",
]

DODGES = [
    "weâ€™re looking at it very strongly.",
    "we have options â€” many options.",
    "itâ€™s complicated, but weâ€™re on top of it.",
    "I donâ€™t want to telegraph strategy.",
    "weâ€™ll have something to say at the right time.",
    "weâ€™re in very serious talks.",
    "weâ€™re working with the best people. The best.",
]

CLOSERS = [
    "Weâ€™ll see what happens.",
    "Weâ€™ll see. Weâ€™ll see what happens.",
    "Youâ€™ll find out soon. Weâ€™ll see what happens.",
    "Weâ€™ll see what happens.",
]

SPICY_ADJECTIVES = [
    "strong", "very strong", "incredible", "tremendous", "historic", "beautiful"
]

KEYWORDS_IRAN = {"iran", "tehran", "middle east", "gulf"}
KEYWORDS_STRIKE = {"strike", "attack", "bomb", "missile", "war"}
KEYWORDS_WHEN = {"when", "timeline", "date", "today", "tomorrow", "how soon", "deadline"}


def normalize(s: str) -> str:
    return " ".join(s.strip().lower().split())


def answer(q: str) -> str:
    nq = normalize(q)

    # Special meme mode: Iran + strike-ish question => maximum non-answer
    if any(k in nq for k in KEYWORDS_IRAN) and any(k in nq for k in KEYWORDS_STRIKE):
        bits = [
            random.choice(OPENERS),
            f"itâ€™ll be {random.choice(SPICY_ADJECTIVES)}.",
            random.choice(DODGES),
            random.choice(CLOSERS),
        ]
        return " ".join(bits)

    # â€œWhen?â€ questions get extra evasive
    if any(k in nq for k in KEYWORDS_WHEN):
        bits = [
            random.choice(OPENERS),
            "timing is everything.",
            random.choice(DODGES),
            random.choice(CLOSERS),
        ]
        return " ".join(bits)

    # Default: generic press-conference dodge
    bits = [
        random.choice(OPENERS),
        random.choice(DODGES),
        random.choice(CLOSERS),
    ]
    return " ".join(bits)


def fake_tweet(q: str) -> str:
    nq = normalize(q)
    tag = "#WELLSEE" if ("iran" in nq or "tehran" in nq) else "#USA"
    tweet = f"{answer(q)} {tag}"
    # keep it tweet-ish
    return tweet[:280]


def main():
    print("\n=== \"Weâ€™ll See What Happens\" â€” Press Conference Simulator ===")
    print("Type a question. Commands: /tweet, /exit\n")

    while True:
        q = input("Q> ").strip()
        if not q:
            continue
        if q.lower() in {"/exit", "exit", "quit"}:
            print("A> Thank you everybody. Weâ€™ll see what happens. ðŸ™‚")
            break

        if q.lower().startswith("/tweet"):
            payload = q[len("/tweet"):].strip() or "Any updates?"
            print("\nTWEET:")
            print(fake_tweet(payload))
            print()
            continue

        resp = answer(q)
        stamp = datetime.now().strftime("%H:%M:%S")
        print("\nA>")
        print(textwrap.fill(resp, width=78))
        print(f"({stamp})\n")


if __name__ == "__main__":
    main()
